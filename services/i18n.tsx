
import React, { createContext, useContext, useState, ReactNode } from 'react';

type Language = 'en' | 'th' | 'cn';

interface LanguageContextType {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: string) => string;
}

const translations: Record<Language, Record<string, string>> = {
  en: {
    // Categories
    'nav.overview': 'System Overview',
    'nav.sales': 'Sales & Planning',
    'nav.production': 'Production Line',
    'nav.warehouse': 'Warehouse & Shipping',
    'nav.management': 'Management & Analysis',
    'nav.welcome': 'Welcome',

    // Sub-menus
    'nav.dashboard': 'Dashboard',
    
    // Sales
    'nav.customers': 'Customer Management',
    'nav.orders': 'Production Plan (List)',
    'nav.poDocs': 'Create Production Order (Doc)',
    
    // Production
    'nav.machineStatus': 'Machine Status',
    'nav.kanban': 'Production Kanban',
    'nav.prodLogs': 'Production Logs (Molding)',
    
    // Warehouse
    'nav.qc': 'Quality Control (QC)',
    'nav.finishedGoods': 'Finished Goods Stock',
    'nav.rawMaterials': 'Raw Materials / BOM',
    'nav.products': 'Product Management',
    'nav.shipping': 'Shipping Management',
    'nav.complaints': 'Customer Complaints',
    'nav.warehouseMap': 'Warehouse Map (WMS)',
    
    // Management
    'nav.employees': 'Employee Management',
    'nav.maintenance': 'Machine Maintenance',
    'nav.purchasing': 'Purchasing',
    'nav.analysisMat': 'Material Analysis',
    'nav.analysisCost': 'Cost Analysis',
    'nav.analysisProfit': 'Profit Analysis',
    'nav.oee': 'Machine Efficiency (OEE)',
    'nav.reports': 'Annual Reports',
    'nav.settings': 'System Settings',

    // Placeholder Page
    'common.comingSoon': 'Coming Soon',
    'common.underConstruction': 'This module is under development.',

    // Settings
    'set.title': 'System Settings',
    'set.subtitle': 'Manage application configuration and company details.',
    'set.companyProfile': 'Company Info',
    'set.companyName': 'Company Name',
    'set.companyAddress': 'Address',
    'set.taxId': 'Tax ID',
    'set.logoUrl': 'Logo URL',
    'set.changeLogo': 'Change Logo',
    'set.qcReasons': 'QC Failure Reasons',
    'set.addReason': 'Add new reason',
    'set.prodSteps': 'Production Steps',
    'set.addStep': 'Add new step',
    'set.machineStatus': 'Machine Statuses',
    'set.addStatus': 'Add new status',
    'set.general': 'General Settings',
    'set.regrind': 'Regrind Percentage (%)',
    'set.oeeHours': 'Working Hours (for OEE)',
    'set.roles': 'User Roles / Departments',
    'set.addRole': 'Add new role',
    'set.overhead': 'Overhead Costs',
    'set.addOverhead': 'Add Item',
    'set.totalPerHour': 'Total per Hour',
    'set.depreciation': 'Machine Depreciation',
    'set.addDepreciation': 'Add Item',
    'set.dataManagement': 'Data Management',
    'set.import': 'Import Data (JSON)',
    'set.export': 'Export Data (JSON)',
    'set.saveAll': 'Save All Changes',
    'set.saveSuccess': 'Settings saved successfully!',
    'set.newItemPlaceholder': 'New Item...',
    'set.costName': 'Item Name',
    'set.costValue': 'Cost',

    // Reports
    'report.title': 'Annual Reports',
    'report.subtitle': 'Comprehensive summary for management',
    'report.purchasing': 'Purchasing Report',
    'report.production': 'Production Report',
    'report.selectYear': 'Fiscal Year',
    'report.totalSpend': 'Total Spend',
    'report.totalItems': 'Total Items',
    'report.totalProduced': 'Total Produced',
    'report.print': 'Print Report',
    
    // Purchasing
    'pur.rfq': 'Price Comparison (RFQ)',
    'pur.compareTitle': 'Compare Suppliers',
    'pur.compareSubtitle': 'One-page summary for decision making',
    'pur.bestPrice': 'Best Price',
    'pur.fastest': 'Fastest Delivery',
    'pur.supplier': 'Supplier',
    'pur.price': 'Price/Unit',
    'pur.moq': 'MOQ',
    'pur.leadTime': 'Lead Time (Days)',
    'pur.credit': 'Credit Term',
    'pur.notes': 'Notes',
    'pur.addQuote': 'Add Quotation',
    'pur.validUntil': 'Valid Until',
    'pur.selectMaterial': 'Select Material to Compare',

    // Common & Tables
    'orders.quantity': 'Quantity',
    'qc.on': 'on',
    'orders.status': 'Status',
    'qc.inspectedBy': 'Inspected by',
    'qc.pass': 'Pass',
    'qc.fail': 'Fail',
    'qc.sourceDate': 'Source Date',
    'inv.itemName': 'Item Name',
    'inv.unit': 'Unit',
    'inv.costUnit': 'Cost/Unit',
    'inv.status': 'Status',
    'inv.inStock': 'In Stock',
    'inv.lowStock': 'Low Stock',
    'inv.outOfStock': 'Out of Stock',
    'prod.poNumber': 'PO Number',
    'prod.productDetail': 'Product Detail',
    'prod.target': 'Target',
    'prod.produced': 'Produced',
    'prod.progress': 'Progress',
    'prod.dailyLog': 'Daily Log',
    'prod.dailyLogSub': 'Daily Report',
    'prod.outputToday': 'Output Today',
    'prod.shift': 'Shift',
    'emp.name': 'Name',
    'emp.department': 'Department',
    'emp.dailyWage': 'Daily Wage',
    'emp.hireDate': 'Hire Date',
    'dash.totalOrders': 'Total Orders',
    'dash.activeMachines': 'Active Machines',
    'dash.totalProduction': 'Total Production',
    'dash.pendingQC': 'Pending QC',
    'dash.productionVolume': 'Production Volume',
    'dash.qcStatus': 'QC Status',
    'dash.recentLogs': 'Recent Logs',
    'dash.ofTotal': 'of total',
    'orders.title': 'Orders',
    'orders.subtitle': 'Manage orders',
    'orders.search': 'Search',
    'orders.filter': 'Filter',
    'orders.lotNo': 'Lot No',
    'orders.productName': 'Product Name',
    'orders.color': 'Color',
    'orders.dueDate': 'Due Date',
    'orders.noFound': 'No orders found',
    'prod.title': 'Production',
    'prod.subtitle': 'Manage production',
    'prod.activeSummary': 'Active Summary',
    'prod.noActive': 'No active orders',
    'prod.noLogs': 'No logs',
    'inv.title': 'Inventory',
    'inv.subtitle': 'Manage stock',
    'inv.searchFinished': 'Search Finished',
    'inv.searchRaw': 'Search Raw',
    'qc.title': 'QC',
    'qc.subtitle': 'Manage QC',
    'emp.title': 'Employees',
    'emp.subtitle': 'Manage employees',

    // WMS
    'wms.title': 'Warehouse Map (WMS)',
    'wms.subtitle': 'Visualize stock locations and manage ISO compliance',
    'wms.zoneRaw': 'Zone A: Raw Materials',
    'wms.zoneFinished': 'Zone B: Finished Goods',
    'wms.zoneQuarantine': 'Zone Q: Quarantine (QC)',
    'wms.rack': 'Rack',
    'wms.capacity': 'Capacity',
    'wms.usage': 'Usage',
    'wms.viewContents': 'View Contents',
    'wms.relocate': 'Relocate',
    'wms.isoStatus': 'ISO Status',
    'wms.quarantine': 'Quarantine',
    'wms.released': 'Released',
    'wms.hold': 'Hold',
    'wms.rejected': 'Rejected',
  },
  th: {
    // Categories
    'nav.overview': 'ภาพรวมระบบ',
    'nav.sales': 'การขายและวางแผน',
    'nav.production': 'สายการผลิต',
    'nav.warehouse': 'คลังสินค้าและการจัดส่ง',
    'nav.management': 'การจัดการและวิเคราะห์',
    'nav.welcome': 'ยินดีต้อนรับ',

    // Sub-menus
    'nav.dashboard': 'แดชบอร์ด',
    'nav.customers': 'จัดการลูกค้า',
    'nav.orders': 'แผนการผลิต / ออเดอร์',
    'nav.poDocs': 'ใบสั่งผลิต (เอกสาร)',
    'nav.machineStatus': 'สถานะเครื่องฉีด',
    'nav.kanban': 'สายการผลิต (Kanban)',
    'nav.prodLogs': 'บันทึกการผลิต (ฉีด)',
    'nav.qc': 'ควบคุมคุณภาพ (QC)',
    'nav.finishedGoods': 'สต็อกสินค้าสำเร็จรูป',
    'nav.rawMaterials': 'วัตถุดิบ / BOM',
    'nav.products': 'จัดการสินค้า',
    'nav.shipping': 'จัดส่งสินค้า',
    'nav.complaints': 'ข้อร้องเรียน',
    'nav.employees': 'จัดการพนักงาน',
    'nav.maintenance': 'ซ่อมบำรุงเครื่องจักร',
    'nav.purchasing': 'การจัดซื้อ',
    'nav.analysisMat': 'วิเคราะห์วัตถุดิบ',
    'nav.analysisCost': 'วิเคราะห์ต้นทุน',
    'nav.analysisProfit': 'วิเคราะห์กำไร',
    'nav.oee': 'ประสิทธิภาพเครื่องจักร',
    'nav.reports': 'รายงานประจำปี',
    'nav.settings': 'ตั้งค่าระบบ',
    'nav.warehouseMap': 'แผนผังคลังสินค้า (WMS)',

    // Placeholder
    'common.comingSoon': 'เร็วๆ นี้',
    'common.underConstruction': 'ส่วนนี้กำลังอยู่ในระหว่างการพัฒนาตามแผนงาน',

    // Settings
    'set.title': 'ตั้งค่าระบบ',
    'set.subtitle': 'จัดการข้อมูลบริษัทและการตั้งค่าพื้นฐาน',
    'set.companyProfile': 'ข้อมูลบริษัท',
    'set.companyName': 'ชื่อบริษัท',
    'set.companyAddress': 'ที่อยู่',
    'set.taxId': 'เลขประจำตัวผู้เสียภาษี',
    'set.logoUrl': 'โลโก้บริษัท',
    'set.changeLogo': 'เปลี่ยนโลโก้',
    'set.qcReasons': 'เหตุผล QC ไม่ผ่าน',
    'set.addReason': 'เพิ่มเหตุผลใหม่',
    'set.prodSteps': 'ขั้นตอนการผลิต',
    'set.addStep': 'เพิ่มขั้นตอนใหม่',
    'set.machineStatus': 'สถานะเครื่องจักร',
    'set.addStatus': 'เพิ่มสถานะใหม่',
    'set.general': 'ตั้งค่าทั่วไป',
    'set.regrind': 'เปอร์เซ็นต์เม็ดบด (Regrind %)',
    'set.oeeHours': 'ชั่วโมงทำงานต่อวัน (สำหรับ OEE)',
    'set.roles': 'จัดการบทบาทผู้ใช้งาน',
    'set.addRole': 'เพิ่มบทบาทใหม่',
    'set.overhead': 'รายการค่าใช้จ่ายแฝง (Overhead)',
    'set.addOverhead': 'เพิ่มรายการ',
    'set.totalPerHour': 'รวมต่อชั่วโมง',
    'set.depreciation': 'รายการค่าเสื่อมราคาเครื่องจักร',
    'set.addDepreciation': 'เพิ่มรายการ',
    'set.dataManagement': 'จัดการข้อมูล',
    'set.import': 'นำเข้าข้อมูล (JSON)',
    'set.export': 'ส่งออกข้อมูล (JSON)',
    'set.saveAll': 'บันทึกการเปลี่ยนแปลงทั้งหมด',
    'set.saveSuccess': 'บันทึกข้อมูลเรียบร้อยแล้ว!',
    'set.newItemPlaceholder': 'ระบุข้อมูลใหม่...',
    'set.costName': 'รายการ',
    'set.costValue': 'จำนวน',

    // Reports
    'report.title': 'รายงานประจำปี',
    'report.subtitle': 'สรุปข้อมูลสำหรับผู้บริหาร (Management Report)',
    'report.purchasing': 'รายงานการจัดซื้อ (Purchasing)',
    'report.production': 'รายงานยอดผลิต (Production)',
    'report.selectYear': 'เลือกปีงบประมาณ',
    'report.totalSpend': 'ยอดซื้อสุทธิ',
    'report.totalItems': 'รายการที่ซื้อ',
    'report.totalProduced': 'ยอดผลิตรวม',
    'report.print': 'พิมพ์รายงาน',

    // Purchasing
    'pur.rfq': 'เปรียบเทียบราคา (RFQ)',
    'pur.compareTitle': 'ตารางเปรียบเทียบ Supplier',
    'pur.compareSubtitle': 'สรุปข้อมูลการเสนอราคา (Quotation Summary)',
    'pur.bestPrice': 'ราคาดีที่สุด',
    'pur.fastest': 'ส่งไวที่สุด',
    'pur.supplier': 'ซัพพลายเออร์',
    'pur.price': 'ราคา/หน่วย',
    'pur.moq': 'ขั้นต่ำ (MOQ)',
    'pur.leadTime': 'ระยะเวลาส่ง (วัน)',
    'pur.credit': 'เครดิตเทอม',
    'pur.notes': 'หมายเหตุ/เงื่อนไข',
    'pur.addQuote': 'เพิ่มใบเสนอราคา',
    'pur.validUntil': 'ราคาใช้ได้ถึง',
    'pur.selectMaterial': 'เลือกวัตถุดิบเพื่อเปรียบเทียบ',

    // Common
    'orders.quantity': 'จำนวน',
    'qc.on': 'เมื่อ',
    'qc.inspectedBy': 'ตรวจสอบโดย',
    'qc.pass': 'ผ่าน',
    'qc.fail': 'ไม่ผ่าน',
    'qc.sourceDate': 'วันที่ผลิต',
    'inv.itemName': 'ชื่อรายการ',
    'inv.unit': 'หน่วย',
    'inv.costUnit': 'ทุน/หน่วย',
    'inv.status': 'สถานะ',
    'inv.inStock': 'มีสินค้า',
    'inv.lowStock': 'สินค้าใกล้หมด',
    'inv.outOfStock': 'สินค้าหมด',
    'prod.poNumber': 'เลขที่ PO',
    'prod.productDetail': 'รายละเอียดสินค้า',
    'prod.target': 'เป้าหมาย',
    'prod.produced': 'ผลิตได้',
    'prod.remaining': 'คงเหลือ',
    'prod.progress': 'ความคืบหน้า',
    'prod.dailyLog': 'บันทึกการผลิตรายวัน',
    'prod.dailyLogSub': 'รายงานยอดผลิตรายวัน (แยกตามเครื่อง)',
    'prod.outputToday': 'ยอดวันนี้',
    'prod.accumulated': 'สะสม / เป้าหมาย',
    'prod.statusToday': 'สถานะวันนี้',
    'prod.dailyTotal': 'รวมวันนี้:',
    'prod.noActive': 'ไม่มีใบสั่งผลิตที่กำลังดำเนินการ',
    'prod.noLogs': 'ไม่พบข้อมูลการผลิตในวันที่เลือก',
    'prod.shift': 'กะ',
    'emp.title': 'รายชื่อพนักงาน',
    'emp.subtitle': 'จัดการกำลังคนและการมอบหมายงาน',
    'emp.name': 'ชื่อ',
    'emp.department': 'แผนก',
    'emp.dailyWage': 'ค่าแรงรายวัน',
    'emp.hireDate': 'วันที่เริ่มงาน',
    'dash.totalOrders': 'คำสั่งซื้อทั้งหมด',
    'dash.activeMachines': 'เครื่องจักรทำงาน',
    'dash.totalProduction': 'ยอดผลิตรวม',
    'dash.pendingQC': 'รอตรวจสอบ QC',
    'dash.productionVolume': 'ปริมาณการผลิตตามเครื่องจักร',
    'dash.qcStatus': 'สถานะการตรวจสอบคุณภาพ',
    'dash.recentLogs': 'ประวัติการผลิตล่าสุด',
    'dash.vsLastMonth': 'เทียบเดือนก่อน',
    'dash.ofTotal': 'ของทั้งหมด',
    'orders.title': 'ใบสั่งบรรจุสินค้า',
    'orders.subtitle': 'จัดการคำสั่งซื้อลูกค้าและเป้าหมายการผลิต',
    'orders.search': 'ค้นหาคำสั่งซื้อ...',
    'orders.filter': 'ตัวกรอง',
    'orders.lotNo': 'เลข Lot',
    'orders.productName': 'ชื่อสินค้า',
    'orders.color': 'สี',
    'orders.dueDate': 'กำหนดส่ง',
    'orders.status': 'สถานะ',
    'orders.noFound': 'ไม่พบคำสั่งซื้อที่ตรงกัน',
    'prod.title': 'หน้างานผลิต',
    'prod.subtitle': 'ภาพรวมสถานะเครื่องจักรและความคืบหน้า',
    'prod.activeSummary': 'สรุปใบสั่งผลิตที่กำลังดำเนินการ',
    'inv.title': 'จัดการสต็อกสินค้า',
    'inv.subtitle': 'ติดตามสินค้าสำเร็จรูปและวัตถุดิบ',
    'inv.finishedGoods': 'สินค้าสำเร็จรูป',
    'inv.rawMaterials': 'วัตถุดิบ',
    'inv.searchFinished': 'ค้นหาสินค้า...',
    'inv.searchRaw': 'ค้นหาวัตถุดิบ...',
    'qc.title': 'ตรวจสอบคุณภาพ (QC)',
    'qc.subtitle': 'ตรวจสอบและอนุมัติล็อตการผลิต',

    // WMS
    'wms.title': 'แผนผังคลังสินค้า (WMS)',
    'wms.subtitle': 'ดูตำแหน่งสินค้าและจัดการสถานะตามมาตรฐาน ISO',
    'wms.zoneRaw': 'โซน A: วัตถุดิบ (Raw Material)',
    'wms.zoneFinished': 'โซน B: สินค้าสำเร็จรูป (Finished Goods)',
    'wms.zoneQuarantine': 'โซน Q: พื้นที่พักรอตรวจสอบ (Quarantine)',
    'wms.rack': 'ชั้นวาง',
    'wms.capacity': 'ความจุ',
    'wms.usage': 'ใช้งาน',
    'wms.viewContents': 'ดูรายการภายใน',
    'wms.relocate': 'ย้ายตำแหน่ง',
    'wms.isoStatus': 'สถานะ ISO',
    'wms.quarantine': 'รอตรวจสอบ (Quarantine)',
    'wms.released': 'ผ่าน (Released)',
    'wms.hold': 'กักกัน (Hold)',
    'wms.rejected': 'ตีกลับ (Rejected)',
  },
  cn: {
    // Categories
    'nav.overview': '系统概览 (Overview)',
    'nav.sales': '销售与计划 (Sales)',
    'nav.production': '生产线 (Production)',
    'nav.warehouse': '仓库与运输 (Warehouse)',
    'nav.management': '管理与分析 (Management)',
    'nav.welcome': '欢迎',

    // Sub-menus
    'nav.dashboard': '仪表板 (Dashboard)',
    'nav.customers': '客户管理',
    'nav.orders': '生产计划/订单',
    'nav.poDocs': '生产单 (文件)',
    'nav.machineStatus': '机器状态',
    'nav.kanban': '看板 (Kanban)',
    'nav.prodLogs': '生产日志',
    'nav.qc': '质量控制 (QC)',
    'nav.finishedGoods': '成品库存',
    'nav.rawMaterials': '原材料 / BOM',
    'nav.products': '产品管理',
    'nav.shipping': '发货管理',
    'nav.complaints': '客户投诉',
    'nav.employees': '员工管理',
    'nav.maintenance': '机器维护',
    'nav.purchasing': '采购',
    'nav.analysisMat': '材料分析',
    'nav.analysisCost': '成本分析',
    'nav.analysisProfit': '利润分析',
    'nav.oee': '设备效率 (OEE)',
    'nav.reports': '年报 (Reports)',
    'nav.settings': '系统设置',
    'nav.warehouseMap': '仓库地图 (WMS)',

    // Placeholder
    'common.comingSoon': '即将推出',
    'common.underConstruction': '正在开发中',

    // Settings
    'set.title': '系统设置',
    'set.subtitle': '管理配置',
    'set.saveAll': '保存所有',
    'set.saveSuccess': '保存成功！',
    'set.costName': '项目名称',
    'set.costValue': '成本',
    'set.companyProfile': '公司信息',
    'set.general': '常规设置',
    
    // Reports
    'report.title': '年报',
    'report.purchasing': '采购报告',
    'report.production': '生产报告',
    'report.print': '打印',

    // Purchasing
    'pur.rfq': '报价比较 (RFQ)',
    'pur.compareTitle': '供应商比较',
    'pur.bestPrice': '最优惠价格',
    'pur.fastest': '最快交货',

    // Common
    'orders.quantity': '数量',
    'qc.pass': '通过',
    'qc.fail': '失败',
    'inv.inStock': '有货',
    'inv.outOfStock': '缺货',
    'prod.progress': '进度',
    
    // WMS
    'wms.title': '仓库地图 (WMS)',
    'wms.subtitle': '可视化库存位置与ISO管理',
    'wms.zoneRaw': 'A区: 原材料',
    'wms.zoneFinished': 'B区: 成品',
    'wms.zoneQuarantine': 'Q区: 隔离区 (QC)',
    'wms.rack': '货架',
    'wms.capacity': '容量',
    'wms.usage': '使用率',
    'wms.viewContents': '查看内容',
    'wms.relocate': '移库',
    'wms.isoStatus': 'ISO 状态',
    'wms.quarantine': '隔离 (Quarantine)',
    'wms.released': '放行 (Released)',
    'wms.hold': '保留 (Hold)',
    'wms.rejected': '拒收 (Rejected)',
  }
};

const LanguageContext = createContext<LanguageContextType | undefined>(undefined);

export const LanguageProvider: React.FC<{ children: ReactNode }> = ({ children }) => {
  const [language, setLanguage] = useState<Language>('th');

  const t = (key: string): string => {
    return translations[language][key] || key;
  };

  return (
    <LanguageContext.Provider value={{ language, setLanguage, t }}>
      {children}
    </LanguageContext.Provider>
  );
};

export const useTranslation = () => {
  const context = useContext(LanguageContext);
  if (!context) {
    throw new Error('useTranslation must be used within a LanguageProvider');
  }
  return context;
};